{"ast":null,"code":"/* \r\n * Copyright (c) 2016, Pierre-Anthony Lemieux <pal@sandflow.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * * Redistributions of source code must retain the above copyright notice, this\r\n *   list of conditions and the following disclaimer.\r\n * * Redistributions in binary form must reproduce the above copyright notice,\r\n *   this list of conditions and the following disclaimer in the documentation\r\n *   and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n */\n\n/**\r\n * @module imscUtils\r\n */\n;\n\n(function (imscUtils) {\n  // wrapper for non-node envs\n\n  /* Documents the error handler interface */\n\n  /**\r\n   * @classdesc Generic interface for handling events. The interface exposes four\r\n   * methods:\r\n   * * <pre>info</pre>: unusual event that does not result in an inconsistent state\r\n   * * <pre>warn</pre>: unexpected event that should not result in an inconsistent state\r\n   * * <pre>error</pre>: unexpected event that may result in an inconsistent state\r\n   * * <pre>fatal</pre>: unexpected event that results in an inconsistent state\r\n   *   and termination of processing\r\n   * Each method takes a single <pre>string</pre> describing the event as argument,\r\n   * and returns a single <pre>boolean</pre>, which terminates processing if <pre>true</pre>.\r\n   *\r\n   * @name ErrorHandler\r\n   * @class\r\n   */\n\n  /*\r\n   * Parses a TTML color expression\r\n   * \r\n   */\n  var HEX_COLOR_RE = /#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/;\n  var DEC_COLOR_RE = /rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/;\n  var DEC_COLORA_RE = /rgba\\(\\s*(\\d+),\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/;\n  var NAMED_COLOR = {\n    transparent: [0, 0, 0, 0],\n    black: [0, 0, 0, 255],\n    silver: [192, 192, 192, 255],\n    gray: [128, 128, 128, 255],\n    white: [255, 255, 255, 255],\n    maroon: [128, 0, 0, 255],\n    red: [255, 0, 0, 255],\n    purple: [128, 0, 128, 255],\n    fuchsia: [255, 0, 255, 255],\n    magenta: [255, 0, 255, 255],\n    green: [0, 128, 0, 255],\n    lime: [0, 255, 0, 255],\n    olive: [128, 128, 0, 255],\n    yellow: [255, 255, 0, 255],\n    navy: [0, 0, 128, 255],\n    blue: [0, 0, 255, 255],\n    teal: [0, 128, 128, 255],\n    aqua: [0, 255, 255, 255],\n    cyan: [0, 255, 255, 255]\n  };\n\n  imscUtils.parseColor = function (str) {\n    var m;\n    var r = null;\n    var nc = NAMED_COLOR[str.toLowerCase()];\n\n    if (nc !== undefined) {\n      r = nc;\n    } else if ((m = HEX_COLOR_RE.exec(str)) !== null) {\n      r = [parseInt(m[1], 16), parseInt(m[2], 16), parseInt(m[3], 16), m[4] !== undefined ? parseInt(m[4], 16) : 255];\n    } else if ((m = DEC_COLOR_RE.exec(str)) !== null) {\n      r = [parseInt(m[1]), parseInt(m[2]), parseInt(m[3]), 255];\n    } else if ((m = DEC_COLORA_RE.exec(str)) !== null) {\n      r = [parseInt(m[1]), parseInt(m[2]), parseInt(m[3]), parseInt(m[4])];\n    }\n\n    return r;\n  };\n\n  var LENGTH_RE = /^((?:\\+|\\-)?\\d*(?:\\.\\d+)?)(px|em|c|%|rh|rw)$/;\n\n  imscUtils.parseLength = function (str) {\n    var m;\n    var r = null;\n\n    if ((m = LENGTH_RE.exec(str)) !== null) {\n      r = {\n        value: parseFloat(m[1]),\n        unit: m[2]\n      };\n    }\n\n    return r;\n  };\n\n  imscUtils.parseTextShadow = function (str) {\n    var shadows = str.match(/([^\\(,\\)]|\\([^\\)]+\\))+/g);\n    var r = [];\n\n    for (var i = 0; i < shadows.length; i++) {\n      var shadow = shadows[i].split(\" \");\n\n      if (shadow.length === 1 && shadow[0] === \"none\") {\n        return \"none\";\n      } else if (shadow.length > 1 && shadow.length < 5) {\n        var out_shadow = [null, null, null, null];\n        /* x offset */\n\n        var l = imscUtils.parseLength(shadow.shift());\n        if (l === null) return null;\n        out_shadow[0] = l;\n        /* y offset */\n\n        l = imscUtils.parseLength(shadow.shift());\n        if (l === null) return null;\n        out_shadow[1] = l;\n        /* is there a third component */\n\n        if (shadow.length === 0) {\n          r.push(out_shadow);\n          continue;\n        }\n\n        l = imscUtils.parseLength(shadow[0]);\n\n        if (l !== null) {\n          out_shadow[2] = l;\n          shadow.shift();\n        }\n\n        if (shadow.length === 0) {\n          r.push(out_shadow);\n          continue;\n        }\n\n        var c = imscUtils.parseColor(shadow[0]);\n        if (c === null) return null;\n        out_shadow[3] = c;\n        r.push(out_shadow);\n      }\n    }\n\n    return r;\n  };\n\n  imscUtils.parsePosition = function (str) {\n    /* see https://www.w3.org/TR/ttml2/#style-value-position */\n    var s = str.split(\" \");\n\n    var isKeyword = function (str) {\n      return str === \"center\" || str === \"left\" || str === \"top\" || str === \"bottom\" || str === \"right\";\n    };\n\n    if (s.length > 4) {\n      return null;\n    }\n    /* initial clean-up pass */\n\n\n    for (var j = 0; j < s.length; j++) {\n      if (!isKeyword(s[j])) {\n        var l = imscUtils.parseLength(s[j]);\n        if (l === null) return null;\n        s[j] = l;\n      }\n    }\n    /* position default */\n\n\n    var pos = {\n      h: {\n        edge: \"left\",\n        offset: {\n          value: 50,\n          unit: \"%\"\n        }\n      },\n      v: {\n        edge: \"top\",\n        offset: {\n          value: 50,\n          unit: \"%\"\n        }\n      }\n    };\n    /* update position */\n\n    for (var i = 0; i < s.length;) {\n      /* extract the current component */\n      var comp = s[i++];\n\n      if (isKeyword(comp)) {\n        /* we have a keyword */\n        var offset = {\n          value: 0,\n          unit: \"%\"\n        };\n        /* peek at the next component */\n\n        if (s.length !== 2 && i < s.length && !isKeyword(s[i])) {\n          /* followed by an offset */\n          offset = s[i++];\n        }\n        /* skip if center */\n\n\n        if (comp === \"right\") {\n          pos.h.edge = comp;\n          pos.h.offset = offset;\n        } else if (comp === \"bottom\") {\n          pos.v.edge = comp;\n          pos.v.offset = offset;\n        } else if (comp === \"left\") {\n          pos.h.offset = offset;\n        } else if (comp === \"top\") {\n          pos.v.offset = offset;\n        }\n      } else if (s.length === 1 || s.length === 2) {\n        /* we have a bare value */\n        if (i === 1) {\n          /* assign it to left edge if first bare value */\n          pos.h.offset = comp;\n        } else {\n          /* assign it to top edge if second bare value */\n          pos.v.offset = comp;\n        }\n      } else {\n        /* error condition */\n        return null;\n      }\n    }\n\n    return pos;\n  };\n\n  imscUtils.ComputedLength = function (rw, rh) {\n    this.rw = rw;\n    this.rh = rh;\n  };\n\n  imscUtils.ComputedLength.prototype.toUsedLength = function (width, height) {\n    return width * this.rw + height * this.rh;\n  };\n\n  imscUtils.ComputedLength.prototype.isZero = function () {\n    return this.rw === 0 && this.rh === 0;\n  };\n  /**\r\n   * Computes a specified length to a root container relative length\r\n   * \r\n   * @param {number} lengthVal Length value to be computed\r\n   * @param {string} lengthUnit Units of the length value\r\n   * @param {number} emScale length of 1em, or null if em is not allowed\r\n   * @param {number} percentScale length to which , or null if perecentage is not allowed\r\n   * @param {number} cellScale length of 1c, or null if c is not allowed\r\n   * @param {number} pxScale length of 1px, or null if px is not allowed\r\n   * @param {number} direction 0 if the length is computed in the horizontal direction, 1 if the length is computed in the vertical direction\r\n   * @return {number} Computed length\r\n   */\n\n\n  imscUtils.toComputedLength = function (lengthVal, lengthUnit, emLength, percentLength, cellLength, pxLength) {\n    if (lengthUnit === \"%\" && percentLength) {\n      return new imscUtils.ComputedLength(percentLength.rw * lengthVal / 100, percentLength.rh * lengthVal / 100);\n    } else if (lengthUnit === \"em\" && emLength) {\n      return new imscUtils.ComputedLength(emLength.rw * lengthVal, emLength.rh * lengthVal);\n    } else if (lengthUnit === \"c\" && cellLength) {\n      return new imscUtils.ComputedLength(lengthVal * cellLength.rw, lengthVal * cellLength.rh);\n    } else if (lengthUnit === \"px\" && pxLength) {\n      return new imscUtils.ComputedLength(lengthVal * pxLength.rw, lengthVal * pxLength.rh);\n    } else if (lengthUnit === \"rh\") {\n      return new imscUtils.ComputedLength(0, lengthVal / 100);\n    } else if (lengthUnit === \"rw\") {\n      return new imscUtils.ComputedLength(lengthVal / 100, 0);\n    } else {\n      return null;\n    }\n  };\n})(typeof exports === 'undefined' ? this.imscUtils = {} : exports);","map":{"version":3,"names":["imscUtils","HEX_COLOR_RE","DEC_COLOR_RE","DEC_COLORA_RE","NAMED_COLOR","transparent","black","silver","gray","white","maroon","red","purple","fuchsia","magenta","green","lime","olive","yellow","navy","blue","teal","aqua","cyan","parseColor","str","m","r","nc","toLowerCase","undefined","exec","parseInt","LENGTH_RE","parseLength","value","parseFloat","unit","parseTextShadow","shadows","match","i","length","shadow","split","out_shadow","l","shift","push","c","parsePosition","s","isKeyword","j","pos","h","edge","offset","v","comp","ComputedLength","rw","rh","prototype","toUsedLength","width","height","isZero","toComputedLength","lengthVal","lengthUnit","emLength","percentLength","cellLength","pxLength","exports"],"sources":["/home/landsys/react-node-video-streaming/client/node_modules/imsc/src/main/js/utils.js"],"sourcesContent":["/* \r\n * Copyright (c) 2016, Pierre-Anthony Lemieux <pal@sandflow.com>\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * * Redistributions of source code must retain the above copyright notice, this\r\n *   list of conditions and the following disclaimer.\r\n * * Redistributions in binary form must reproduce the above copyright notice,\r\n *   this list of conditions and the following disclaimer in the documentation\r\n *   and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/**\r\n * @module imscUtils\r\n */\r\n\r\n;\r\n(function (imscUtils) { // wrapper for non-node envs\r\n\r\n    /* Documents the error handler interface */\r\n\r\n    /**\r\n     * @classdesc Generic interface for handling events. The interface exposes four\r\n     * methods:\r\n     * * <pre>info</pre>: unusual event that does not result in an inconsistent state\r\n     * * <pre>warn</pre>: unexpected event that should not result in an inconsistent state\r\n     * * <pre>error</pre>: unexpected event that may result in an inconsistent state\r\n     * * <pre>fatal</pre>: unexpected event that results in an inconsistent state\r\n     *   and termination of processing\r\n     * Each method takes a single <pre>string</pre> describing the event as argument,\r\n     * and returns a single <pre>boolean</pre>, which terminates processing if <pre>true</pre>.\r\n     *\r\n     * @name ErrorHandler\r\n     * @class\r\n     */\r\n\r\n\r\n    /*\r\n     * Parses a TTML color expression\r\n     * \r\n     */\r\n\r\n    var HEX_COLOR_RE = /#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/;\r\n    var DEC_COLOR_RE = /rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/;\r\n    var DEC_COLORA_RE = /rgba\\(\\s*(\\d+),\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/;\r\n    var NAMED_COLOR = {\r\n        transparent: [0, 0, 0, 0],\r\n        black: [0, 0, 0, 255],\r\n        silver: [192, 192, 192, 255],\r\n        gray: [128, 128, 128, 255],\r\n        white: [255, 255, 255, 255],\r\n        maroon: [128, 0, 0, 255],\r\n        red: [255, 0, 0, 255],\r\n        purple: [128, 0, 128, 255],\r\n        fuchsia: [255, 0, 255, 255],\r\n        magenta: [255, 0, 255, 255],\r\n        green: [0, 128, 0, 255],\r\n        lime: [0, 255, 0, 255],\r\n        olive: [128, 128, 0, 255],\r\n        yellow: [255, 255, 0, 255],\r\n        navy: [0, 0, 128, 255],\r\n        blue: [0, 0, 255, 255],\r\n        teal: [0, 128, 128, 255],\r\n        aqua: [0, 255, 255, 255],\r\n        cyan: [0, 255, 255, 255]\r\n    };\r\n\r\n    imscUtils.parseColor = function (str) {\r\n\r\n        var m;\r\n        \r\n        var r = null;\r\n        \r\n        var nc = NAMED_COLOR[str.toLowerCase()];\r\n        \r\n        if (nc !== undefined) {\r\n\r\n            r = nc;\r\n\r\n        } else if ((m = HEX_COLOR_RE.exec(str)) !== null) {\r\n\r\n            r = [parseInt(m[1], 16),\r\n                parseInt(m[2], 16),\r\n                parseInt(m[3], 16),\r\n                (m[4] !== undefined ? parseInt(m[4], 16) : 255)];\r\n            \r\n        } else if ((m = DEC_COLOR_RE.exec(str)) !== null) {\r\n\r\n            r = [parseInt(m[1]),\r\n                parseInt(m[2]),\r\n                parseInt(m[3]),\r\n                255];\r\n            \r\n        } else if ((m = DEC_COLORA_RE.exec(str)) !== null) {\r\n\r\n            r = [parseInt(m[1]),\r\n                parseInt(m[2]),\r\n                parseInt(m[3]),\r\n                parseInt(m[4])];\r\n            \r\n        }\r\n\r\n        return r;\r\n    };\r\n\r\n    var LENGTH_RE = /^((?:\\+|\\-)?\\d*(?:\\.\\d+)?)(px|em|c|%|rh|rw)$/;\r\n\r\n    imscUtils.parseLength = function (str) {\r\n\r\n        var m;\r\n\r\n        var r = null;\r\n\r\n        if ((m = LENGTH_RE.exec(str)) !== null) {\r\n\r\n            r = {value: parseFloat(m[1]), unit: m[2]};\r\n        }\r\n\r\n        return r;\r\n    };\r\n\r\n    imscUtils.parseTextShadow = function (str) {\r\n\r\n        var shadows = str.match(/([^\\(,\\)]|\\([^\\)]+\\))+/g);\r\n        \r\n        var r = [];\r\n\r\n        for (var i = 0; i < shadows.length; i++) {\r\n\r\n            var shadow = shadows[i].split(\" \");\r\n\r\n            if (shadow.length === 1 && shadow[0] === \"none\") {\r\n\r\n                return \"none\";\r\n\r\n            } else if (shadow.length > 1 && shadow.length < 5) {\r\n\r\n                var out_shadow = [null, null, null, null];\r\n\r\n                /* x offset */\r\n\r\n                var l = imscUtils.parseLength(shadow.shift());\r\n\r\n                if (l === null)\r\n                    return null;\r\n\r\n                out_shadow[0] = l;\r\n\r\n                /* y offset */\r\n\r\n                l = imscUtils.parseLength(shadow.shift());\r\n\r\n                if (l === null)\r\n                    return null;\r\n\r\n                out_shadow[1] = l;\r\n\r\n                /* is there a third component */\r\n\r\n                if (shadow.length === 0) {\r\n                    r.push(out_shadow);\r\n                    continue;\r\n                }\r\n\r\n                l = imscUtils.parseLength(shadow[0]);\r\n\r\n                if (l !== null) {\r\n\r\n                    out_shadow[2] = l;\r\n\r\n                    shadow.shift();\r\n\r\n                }\r\n\r\n                if (shadow.length === 0) {\r\n                    r.push(out_shadow);\r\n                    continue;\r\n                }\r\n\r\n                var c = imscUtils.parseColor(shadow[0]);\r\n\r\n                if (c === null)\r\n                    return null;\r\n\r\n                out_shadow[3] = c;\r\n\r\n                r.push(out_shadow);\r\n            }\r\n\r\n        }\r\n\r\n        return r;\r\n    };\r\n\r\n\r\n    imscUtils.parsePosition = function (str) {\r\n\r\n        /* see https://www.w3.org/TR/ttml2/#style-value-position */\r\n\r\n        var s = str.split(\" \");\r\n\r\n        var isKeyword = function (str) {\r\n\r\n            return str === \"center\" ||\r\n                    str === \"left\" ||\r\n                    str === \"top\" ||\r\n                    str === \"bottom\" ||\r\n                    str === \"right\";\r\n\r\n        };\r\n\r\n        if (s.length > 4) {\r\n\r\n            return null;\r\n\r\n        }\r\n\r\n        /* initial clean-up pass */\r\n\r\n        for (var j = 0 ; j < s.length; j++) {\r\n\r\n            if (!isKeyword(s[j])) {\r\n\r\n                var l = imscUtils.parseLength(s[j]);\r\n\r\n                if (l === null)\r\n                    return null;\r\n\r\n                s[j] = l;\r\n            }\r\n\r\n        }\r\n\r\n        /* position default */\r\n\r\n        var pos = {\r\n            h: {edge: \"left\", offset: {value: 50, unit: \"%\"}},\r\n            v: {edge: \"top\", offset: {value: 50, unit: \"%\"}}\r\n        };\r\n\r\n        /* update position */\r\n\r\n        for (var i = 0; i < s.length; ) {\r\n\r\n            /* extract the current component */\r\n\r\n            var comp = s[i++];\r\n\r\n            if (isKeyword(comp)) {\r\n\r\n                /* we have a keyword */\r\n\r\n                var offset = {value: 0, unit: \"%\"};\r\n\r\n                /* peek at the next component */\r\n\r\n                if (s.length !== 2 && i < s.length && (!isKeyword(s[i]))) {\r\n\r\n                    /* followed by an offset */\r\n\r\n                    offset = s[i++];\r\n\r\n                }\r\n\r\n                /* skip if center */\r\n\r\n                if (comp === \"right\") {\r\n\r\n                    pos.h.edge = comp;\r\n\r\n                    pos.h.offset = offset;\r\n\r\n                } else if (comp === \"bottom\") {\r\n\r\n                    pos.v.edge = comp;\r\n\r\n\r\n                    pos.v.offset = offset;\r\n\r\n\r\n                } else if (comp === \"left\") {\r\n\r\n                    pos.h.offset = offset;\r\n\r\n\r\n                } else if (comp === \"top\") {\r\n\r\n                    pos.v.offset = offset;\r\n\r\n\r\n                }\r\n\r\n            } else if (s.length === 1 || s.length === 2) {\r\n\r\n                /* we have a bare value */\r\n\r\n                if (i === 1) {\r\n\r\n                    /* assign it to left edge if first bare value */\r\n\r\n                    pos.h.offset = comp;\r\n\r\n                } else {\r\n\r\n                    /* assign it to top edge if second bare value */\r\n\r\n                    pos.v.offset = comp;\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                /* error condition */\r\n\r\n                return null;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return pos;\r\n    };\r\n\r\n\r\n    imscUtils.ComputedLength = function (rw, rh) {\r\n        this.rw = rw;\r\n        this.rh = rh;\r\n    };\r\n\r\n    imscUtils.ComputedLength.prototype.toUsedLength = function (width, height) {\r\n        return width * this.rw + height * this.rh;\r\n    };\r\n\r\n    imscUtils.ComputedLength.prototype.isZero = function () {\r\n        return this.rw === 0 && this.rh === 0;\r\n    };\r\n\r\n    /**\r\n     * Computes a specified length to a root container relative length\r\n     * \r\n     * @param {number} lengthVal Length value to be computed\r\n     * @param {string} lengthUnit Units of the length value\r\n     * @param {number} emScale length of 1em, or null if em is not allowed\r\n     * @param {number} percentScale length to which , or null if perecentage is not allowed\r\n     * @param {number} cellScale length of 1c, or null if c is not allowed\r\n     * @param {number} pxScale length of 1px, or null if px is not allowed\r\n     * @param {number} direction 0 if the length is computed in the horizontal direction, 1 if the length is computed in the vertical direction\r\n     * @return {number} Computed length\r\n     */\r\n    imscUtils.toComputedLength = function(lengthVal, lengthUnit, emLength, percentLength, cellLength, pxLength) {\r\n\r\n        if (lengthUnit === \"%\" && percentLength) {\r\n\r\n            return new imscUtils.ComputedLength(\r\n                    percentLength.rw * lengthVal / 100,\r\n                    percentLength.rh * lengthVal / 100\r\n                    );\r\n\r\n        } else if (lengthUnit === \"em\" && emLength) {\r\n\r\n            return new imscUtils.ComputedLength(\r\n                    emLength.rw * lengthVal,\r\n                    emLength.rh * lengthVal\r\n                    );\r\n\r\n        } else if (lengthUnit === \"c\" && cellLength) {\r\n\r\n            return new imscUtils.ComputedLength(\r\n                    lengthVal * cellLength.rw,\r\n                    lengthVal * cellLength.rh\r\n                    );\r\n\r\n        } else if (lengthUnit === \"px\" && pxLength) {\r\n\r\n            return new imscUtils.ComputedLength(\r\n                    lengthVal * pxLength.rw,\r\n                    lengthVal * pxLength.rh\r\n                    );\r\n\r\n        } else if (lengthUnit === \"rh\") {\r\n\r\n            return new imscUtils.ComputedLength(\r\n                    0,\r\n                    lengthVal / 100\r\n                    );\r\n\r\n        } else if (lengthUnit === \"rw\") {\r\n\r\n            return new imscUtils.ComputedLength(\r\n                    lengthVal / 100,\r\n                    0                    \r\n                    );\r\n\r\n        } else {\r\n\r\n            return null;\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n\r\n})(typeof exports === 'undefined' ? this.imscUtils = {} : exports);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}