{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _FactoryMaker = require('../../core/FactoryMaker');\n\nvar _FactoryMaker2 = _interopRequireDefault(_FactoryMaker);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction DroppedFramesHistory() {\n  var values = [];\n  var lastDroppedFrames = 0;\n  var lastTotalFrames = 0;\n\n  function push(index, playbackQuality) {\n    var droppedVideoFrames = playbackQuality && playbackQuality.droppedVideoFrames ? playbackQuality.droppedVideoFrames : 0;\n    var totalVideoFrames = playbackQuality && playbackQuality.totalVideoFrames ? playbackQuality.totalVideoFrames : 0;\n    var intervalDroppedFrames = droppedVideoFrames - lastDroppedFrames;\n    lastDroppedFrames = droppedVideoFrames;\n    var intervalTotalFrames = totalVideoFrames - lastTotalFrames;\n    lastTotalFrames = totalVideoFrames;\n\n    if (!isNaN(index)) {\n      if (!values[index]) {\n        values[index] = {\n          droppedVideoFrames: intervalDroppedFrames,\n          totalVideoFrames: intervalTotalFrames\n        };\n      } else {\n        values[index].droppedVideoFrames += intervalDroppedFrames;\n        values[index].totalVideoFrames += intervalTotalFrames;\n      }\n    }\n  }\n\n  function getDroppedFrameHistory() {\n    return values;\n  }\n\n  function reset(playbackQuality) {\n    values = [];\n    lastDroppedFrames = playbackQuality.droppedVideoFrames;\n    lastTotalFrames = playbackQuality.totalVideoFrames;\n  }\n\n  return {\n    push: push,\n    getFrameHistory: getDroppedFrameHistory,\n    reset: reset\n  };\n}\n\nDroppedFramesHistory.__dashjs_factory_name = 'DroppedFramesHistory';\n\nvar factory = _FactoryMaker2.default.getClassFactory(DroppedFramesHistory);\n\nexports.default = factory;","map":{"version":3,"mappings":";;;;;;AACA;;;;;;;;AAGA;;AAAA,SAASA,oBAAT,GAAgC;EAE5B,IAAIC,SAAS,EAAb;EACA,IAAIC,oBAAoB,CAAxB;EACA,IAAIC,kBAAkB,CAAtB;;EAEA,SAASC,IAAT,CAAcC,KAAd,EAAqBC,eAArB,EAAsC;IAClC,IAAIC,qBAAqBD,mBAAmBA,gBAAgBC,kBAAnCD,GAAwDA,gBAAgBC,kBAAxED,GAA6F,CAAtH;IACA,IAAIE,mBAAmBF,mBAAmBA,gBAAgBE,gBAAnCF,GAAsDA,gBAAgBE,gBAAtEF,GAAyF,CAAhH;IAEA,IAAIG,wBAAwBF,qBAAqBL,iBAAjD;IACAA,oBAAoBK,kBAApBL;IAEA,IAAIQ,sBAAsBF,mBAAmBL,eAA7C;IACAA,kBAAkBK,gBAAlBL;;IAEA,IAAI,CAACQ,MAAMN,KAANM,CAAL,EAAmB;MACf,IAAI,CAACV,OAAOI,KAAPJ,CAAL,EAAoB;QAChBA,OAAOI,KAAPJ,IAAgB;UAACM,oBAAoBE,qBAArB;UAA4CD,kBAAkBE;QAA9D,CAAhBT;MADJ,OAEO;QACHA,OAAOI,KAAPJ,EAAcM,kBAAdN,IAAoCQ,qBAApCR;QACAA,OAAOI,KAAPJ,EAAcO,gBAAdP,IAAkCS,mBAAlCT;MAEP;IACJ;EAED;;EAAA,SAASW,sBAAT,GAAkC;IAC9B,OAAOX,MAAP;EAGJ;;EAAA,SAASY,KAAT,CAAeP,eAAf,EAAgC;IAC5BL,SAAS,EAATA;IACAC,oBAAoBI,gBAAgBC,kBAApCL;IACAC,kBAAkBG,gBAAgBE,gBAAlCL;EAGJ;;EAAA,OAAO;IACHC,MAAMA,IADH;IAEHU,iBAAiBF,sBAFd;IAGHC,OAAOA;EAHJ,CAAP;AAOJb;;AAAAA,qBAAqBe,qBAArBf,GAA6C,sBAA7CA;;AACA,IAAMgB,UAAUC,uBAAaC,eAAbD,CAA6BjB,oBAA7BiB,CAAhB;;kBACeD,O","names":["DroppedFramesHistory","values","lastDroppedFrames","lastTotalFrames","push","index","playbackQuality","droppedVideoFrames","totalVideoFrames","intervalDroppedFrames","intervalTotalFrames","isNaN","getDroppedFrameHistory","reset","getFrameHistory","__dashjs_factory_name","factory","FactoryMaker","getClassFactory"],"sources":["/home/landsys/react-node-video-streaming/client/node_modules/dashjs/src/streaming/rules/DroppedFramesHistory.js"],"sourcesContent":["\nimport FactoryMaker from '../../core/FactoryMaker';\n\n\nfunction DroppedFramesHistory() {\n\n    let values = [];\n    let lastDroppedFrames = 0;\n    let lastTotalFrames = 0;\n\n    function push(index, playbackQuality) {\n        let droppedVideoFrames = playbackQuality && playbackQuality.droppedVideoFrames ? playbackQuality.droppedVideoFrames : 0;\n        let totalVideoFrames = playbackQuality && playbackQuality.totalVideoFrames ? playbackQuality.totalVideoFrames : 0;\n\n        let intervalDroppedFrames = droppedVideoFrames - lastDroppedFrames;\n        lastDroppedFrames = droppedVideoFrames;\n\n        let intervalTotalFrames = totalVideoFrames - lastTotalFrames;\n        lastTotalFrames = totalVideoFrames;\n\n        if (!isNaN(index)) {\n            if (!values[index]) {\n                values[index] = {droppedVideoFrames: intervalDroppedFrames, totalVideoFrames: intervalTotalFrames};\n            } else {\n                values[index].droppedVideoFrames += intervalDroppedFrames;\n                values[index].totalVideoFrames += intervalTotalFrames;\n            }\n        }\n    }\n\n    function getDroppedFrameHistory() {\n        return values;\n    }\n\n    function reset(playbackQuality) {\n        values = [];\n        lastDroppedFrames = playbackQuality.droppedVideoFrames;\n        lastTotalFrames = playbackQuality.totalVideoFrames;\n    }\n\n    return {\n        push: push,\n        getFrameHistory: getDroppedFrameHistory,\n        reset: reset\n    };\n}\n\nDroppedFramesHistory.__dashjs_factory_name = 'DroppedFramesHistory';\nconst factory = FactoryMaker.getClassFactory(DroppedFramesHistory);\nexport default factory;\n"]},"metadata":{},"sourceType":"script"}