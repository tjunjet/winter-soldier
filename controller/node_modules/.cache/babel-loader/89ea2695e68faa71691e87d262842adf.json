{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _FactoryMaker = require('../../core/FactoryMaker');\n\nvar _FactoryMaker2 = _interopRequireDefault(_FactoryMaker);\n\nvar _objectiron = require('./objectiron');\n\nvar _objectiron2 = _interopRequireDefault(_objectiron);\n\nvar _xml2json = require('../../../externals/xml2json');\n\nvar _xml2json2 = _interopRequireDefault(_xml2json);\n\nvar _StringMatcher = require('./matchers/StringMatcher');\n\nvar _StringMatcher2 = _interopRequireDefault(_StringMatcher);\n\nvar _DurationMatcher = require('./matchers/DurationMatcher');\n\nvar _DurationMatcher2 = _interopRequireDefault(_DurationMatcher);\n\nvar _DateTimeMatcher = require('./matchers/DateTimeMatcher');\n\nvar _DateTimeMatcher2 = _interopRequireDefault(_DateTimeMatcher);\n\nvar _NumericMatcher = require('./matchers/NumericMatcher');\n\nvar _NumericMatcher2 = _interopRequireDefault(_NumericMatcher);\n\nvar _RepresentationBaseValuesMap = require('./maps/RepresentationBaseValuesMap');\n\nvar _RepresentationBaseValuesMap2 = _interopRequireDefault(_RepresentationBaseValuesMap);\n\nvar _SegmentValuesMap = require('./maps/SegmentValuesMap');\n\nvar _SegmentValuesMap2 = _interopRequireDefault(_SegmentValuesMap);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction DashParser(config) {\n  config = config || {};\n  var context = this.context;\n  var debug = config.debug;\n  var instance = void 0,\n      logger = void 0,\n      matchers = void 0,\n      converter = void 0,\n      objectIron = void 0;\n\n  function setup() {\n    logger = debug.getLogger(instance);\n    matchers = [new _DurationMatcher2.default(), new _DateTimeMatcher2.default(), new _NumericMatcher2.default(), new _StringMatcher2.default() // last in list to take precedence over NumericMatcher\n    ];\n    converter = new _xml2json2.default({\n      escapeMode: false,\n      attributePrefix: '',\n      arrayAccessForm: 'property',\n      emptyNodeForm: 'object',\n      stripWhitespaces: false,\n      enableToStringFunc: true,\n      ignoreRoot: false,\n      matchers: matchers\n    });\n    objectIron = (0, _objectiron2.default)(context).create({\n      adaptationset: new _RepresentationBaseValuesMap2.default(),\n      period: new _SegmentValuesMap2.default()\n    });\n  }\n\n  function getMatchers() {\n    return matchers;\n  }\n\n  function getIron() {\n    return objectIron;\n  }\n\n  function parse(data) {\n    var manifest = void 0;\n    var startTime = window.performance.now();\n    manifest = converter.xml_str2json(data);\n\n    if (!manifest) {\n      throw new Error('parsing the manifest failed');\n    }\n\n    var jsonTime = window.performance.now(); // handle full MPD and Patch ironing separately\n\n    if (manifest.Patch) {\n      manifest = manifest.Patch; // drop root reference\n      // apply iron to patch operations individually\n\n      if (manifest.add_asArray) {\n        manifest.add_asArray.forEach(function (operand) {\n          return objectIron.run(operand);\n        });\n      }\n\n      if (manifest.replace_asArray) {\n        manifest.replace_asArray.forEach(function (operand) {\n          return objectIron.run(operand);\n        });\n      } // note that we don't need to iron remove as they contain no children\n\n    } else {\n      manifest = manifest.MPD; // drop root reference\n\n      objectIron.run(manifest);\n    }\n\n    var ironedTime = window.performance.now();\n    logger.info('Parsing complete: ( xml2json: ' + (jsonTime - startTime).toPrecision(3) + 'ms, objectiron: ' + (ironedTime - jsonTime).toPrecision(3) + 'ms, total: ' + ((ironedTime - startTime) / 1000).toPrecision(3) + 's)');\n    manifest.protocol = 'DASH';\n    return manifest;\n  }\n\n  instance = {\n    parse: parse,\n    getMatchers: getMatchers,\n    getIron: getIron\n  };\n  setup();\n  return instance;\n}\n/**\n* The copyright in this software is being made available under the BSD License,\n* included below. This software may be subject to other third party and contributor\n* rights, including patent rights, and no such rights are granted under this license.\n*\n* Copyright (c) 2013, Dash Industry Forum.\n* All rights reserved.\n*\n* Redistribution and use in source and binary forms, with or without modification,\n* are permitted provided that the following conditions are met:\n*  * Redistributions of source code must retain the above copyright notice, this\n*  list of conditions and the following disclaimer.\n*  * Redistributions in binary form must reproduce the above copyright notice,\n*  this list of conditions and the following disclaimer in the documentation and/or\n*  other materials provided with the distribution.\n*  * Neither the name of Dash Industry Forum nor the names of its\n*  contributors may be used to endorse or promote products derived from this software\n*  without specific prior written permission.\n*\n*  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n*  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n*  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n*  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n*  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n*  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n*  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n*  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n*  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n*  POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\nDashParser.__dashjs_factory_name = 'DashParser';\nexports.default = _FactoryMaker2.default.getClassFactory(DashParser);","map":{"version":3,"mappings":"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","names":["DashParser","config","context","debug","instance","logger","matchers","converter","objectIron","setup","getLogger","DurationMatcher","DateTimeMatcher","NumericMatcher","StringMatcher","X2JS","escapeMode","attributePrefix","arrayAccessForm","emptyNodeForm","stripWhitespaces","enableToStringFunc","ignoreRoot","create","adaptationset","RepresentationBaseValuesMap","period","SegmentValuesMap","getMatchers","getIron","parse","data","manifest","startTime","window","performance","now","xml_str2json","Error","jsonTime","Patch","add_asArray","forEach","operand","run","replace_asArray","MPD","ironedTime","info","toPrecision","protocol","__dashjs_factory_name","FactoryMaker","getClassFactory"],"sources":["/home/landsys/react-node-video-streaming/client/node_modules/dashjs/src/dash/parser/DashParser.js"],"sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport FactoryMaker from '../../core/FactoryMaker';\nimport ObjectIron from './objectiron';\nimport X2JS from '../../../externals/xml2json';\nimport StringMatcher from './matchers/StringMatcher';\nimport DurationMatcher from './matchers/DurationMatcher';\nimport DateTimeMatcher from './matchers/DateTimeMatcher';\nimport NumericMatcher from './matchers/NumericMatcher';\nimport RepresentationBaseValuesMap from './maps/RepresentationBaseValuesMap';\nimport SegmentValuesMap from './maps/SegmentValuesMap';\n\nfunction DashParser(config) {\n\n    config = config || {};\n    const context = this.context;\n    const debug = config.debug;\n\n    let instance,\n        logger,\n        matchers,\n        converter,\n        objectIron;\n\n    function setup() {\n        logger = debug.getLogger(instance);\n        matchers = [\n            new DurationMatcher(),\n            new DateTimeMatcher(),\n            new NumericMatcher(),\n            new StringMatcher()   // last in list to take precedence over NumericMatcher\n        ];\n\n        converter = new X2JS({\n            escapeMode:         false,\n            attributePrefix:    '',\n            arrayAccessForm:    'property',\n            emptyNodeForm:      'object',\n            stripWhitespaces:   false,\n            enableToStringFunc: true,\n            ignoreRoot:         false,\n            matchers:           matchers\n        });\n\n        objectIron = ObjectIron(context).create({\n            adaptationset: new RepresentationBaseValuesMap(),\n            period: new SegmentValuesMap()\n        });\n    }\n\n    function getMatchers() {\n        return matchers;\n    }\n\n    function getIron() {\n        return objectIron;\n    }\n\n    function parse(data) {\n        let manifest;\n        const startTime = window.performance.now();\n\n        manifest = converter.xml_str2json(data);\n\n        if (!manifest) {\n            throw new Error('parsing the manifest failed');\n        }\n\n        const jsonTime = window.performance.now();\n\n        // handle full MPD and Patch ironing separately\n        if (manifest.Patch) {\n            manifest = manifest.Patch; // drop root reference\n            // apply iron to patch operations individually\n            if (manifest.add_asArray) {\n                manifest.add_asArray.forEach((operand) => objectIron.run(operand));\n            }\n            if (manifest.replace_asArray) {\n                manifest.replace_asArray.forEach((operand) => objectIron.run(operand));\n            }\n            // note that we don't need to iron remove as they contain no children\n        } else {\n            manifest = manifest.MPD; // drop root reference\n            objectIron.run(manifest);\n        }\n\n        const ironedTime = window.performance.now();\n        logger.info('Parsing complete: ( xml2json: ' + (jsonTime - startTime).toPrecision(3) + 'ms, objectiron: ' + (ironedTime - jsonTime).toPrecision(3) + 'ms, total: ' + ((ironedTime - startTime) / 1000).toPrecision(3) + 's)');\n\n        manifest.protocol = 'DASH';\n\n        return manifest;\n    }\n\n    instance = {\n        parse: parse,\n        getMatchers: getMatchers,\n        getIron: getIron\n    };\n\n    setup();\n\n    return instance;\n}\n\nDashParser.__dashjs_factory_name = 'DashParser';\nexport default FactoryMaker.getClassFactory(DashParser);\n"]},"metadata":{},"sourceType":"script"}